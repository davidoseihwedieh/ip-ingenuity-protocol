<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Ingenuity Protocol - Simple Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f4f4f4; }
        header { background: #007bff; color: white; padding: 1em; text-align: center; }
        nav a { color: white; margin: 0 1em; }
        section { margin: 1em 0; padding: 1em; background: white; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        form { display: flex; flex-direction: column; max-width: 400px; }
        input, select, button { margin: 0.5em 0; padding: 0.5em; }
        button { background: #007bff; color: white; border: none; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 0.5em; }
        .metrics { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1em; margin: 1em 0; }
        .metric { background: #e8f4fd; padding: 1em; border-radius: 8px; text-align: center; }
        .metric-value { font-size: 2em; font-weight: bold; color: #007bff; }
        .result { background: #d4edda; padding: 1em; border-radius: 8px; margin: 1em 0; }
    </style>
</head>
<body>
    <header>
        <h1>IP Ingenuity Protocol</h1>
        <nav>
            <a href="#valuation">AI Valuation</a>
            <a href="#tokenization">Tokenization</a>
            <a href="#governance">Governance</a>
            <a href="#validation">Validation</a>
        </nav>
    </header>

    <div class="metrics">
        <div class="metric">
            <div class="metric-value">87.5%</div>
            <div>Patent Claims Validated</div>
        </div>
        <div class="metric">
            <div class="metric-value">0.648</div>
            <div>AI Correlation</div>
        </div>
        <div class="metric">
            <div class="metric-value">43.2%</div>
            <div>Inequality Reduction</div>
        </div>
        <div class="metric">
            <div class="metric-value">15.3%</div>
            <div>Gas Reduction</div>
        </div>
    </div>

    <section id="valuation">
        <h2>AI Patent Valuation</h2>
        <form id="valuation-form">
            <input type="number" id="numClaims" placeholder="Number of Claims" value="10">
            <input type="number" id="numCitations" placeholder="Number of Citations" value="50">
            <input type="number" id="techComplex" placeholder="Technical Complexity (1-10)" value="5">
            <input type="range" id="marketSent" min="-1" max="1" step="0.1" value="0">
            <input type="range" id="marketAdopt" min="0" max="1" step="0.1" value="0.5">
            <input type="number" id="citDensity" placeholder="Citation Density" value="2.5" step="0.1">
            <button type="submit">Valuate Patent</button>
        </form>
        <div id="valuation-result" class="result" style="display: none;"></div>
    </section>

    <section id="tokenization">
        <h2>IPT-1155 Tokenization</h2>
        <form id="mint-form">
            <input type="number" id="tokenId" placeholder="Token ID" value="1">
            <input type="number" id="amount" placeholder="Amount" value="100">
            <input type="number" id="royalty" placeholder="Royalty %" value="10" max="50">
            <button type="submit">Mint Token (15.3% Gas Optimized)</button>
        </form>
        <div id="mint-result" class="result" style="display: none;"></div>
    </section>

    <section id="governance">
        <h2>Quadratic Voting</h2>
        <form id="vote-form">
            <input type="text" id="proposal" placeholder="Proposal Name" value="Upgrade AI Model">
            <input type="number" id="votes" placeholder="Number of Votes" value="5">
            <button type="submit">Cast Vote (Cost = Votes²)</button>
        </form>
        <div id="vote-result" class="result" style="display: none;"></div>
    </section>

    <section id="validation">
        <h2>Patent Claims Validation</h2>
        <table>
            <thead>
                <tr><th>Claim</th><th>Component</th><th>Status</th><th>Evidence</th></tr>
            </thead>
            <tbody>
                <tr><td>1</td><td>IPT-1155</td><td>✅ VALIDATED</td><td>15.3% gas reduction</td></tr>
                <tr><td>3</td><td>Cross-Chain</td><td>✅ VALIDATED</td><td>50.1% gas reduction</td></tr>
                <tr><td>5</td><td>Governance</td><td>✅ VALIDATED</td><td>43.2% inequality reduction</td></tr>
                <tr><td>36</td><td>AI</td><td>⚠️ NEAR PASS</td><td>-6.4% MAE</td></tr>
                <tr><td>37</td><td>AI</td><td>✅ VALIDATED</td><td>12.5% improvement</td></tr>
                <tr><td>38</td><td>Cross-Chain</td><td>✅ VALIDATED</td><td>47.6% gas reduction</td></tr>
                <tr><td>39</td><td>AI</td><td>✅ VALIDATED</td><td>87.2% precision</td></tr>
                <tr><td>40</td><td>Governance</td><td>✅ VALIDATED</td><td>p < 0.001 significance</td></tr>
                <tr><td>47</td><td>AI</td><td>⚠️ NEAR PASS</td><td>-0.1% vs 20% target</td></tr>
                <tr><td>48</td><td>AI</td><td>❌ NEEDS WORK</td><td>23.5% vs 78% target</td></tr>
            </tbody>
        </table>
    </section>

    <script>
        // AI Valuation
        document.getElementById('valuation-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const features = {
                numClaims: parseInt(document.getElementById('numClaims').value),
                numCitations: parseInt(document.getElementById('numCitations').value),
                techComplex: parseFloat(document.getElementById('techComplex').value),
                marketSent: parseFloat(document.getElementById('marketSent').value),
                marketAdopt: parseFloat(document.getElementById('marketAdopt').value),
                citDensity: parseFloat(document.getElementById('citDensity').value)
            };
            
            try {
                const response = await fetch('/api/predict', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(features)
                });
                const result = await response.json();
                document.getElementById('valuation-result').innerHTML = 
                    `<strong>Estimated Value:</strong> $${Math.round(result.value).toLocaleString()}<br>
                     <strong>Correlation:</strong> ${result.correlation}<br>
                     <strong>MAE Reduction:</strong> ${result.maeReduction}%`;
                document.getElementById('valuation-result').style.display = 'block';
            } catch (error) {
                // Fallback calculation
                const baseValue = 100000 + features.numClaims * 15000 + features.numCitations * 2500;
                document.getElementById('valuation-result').innerHTML = 
                    `<strong>Estimated Value:</strong> $${baseValue.toLocaleString()}<br>
                     <strong>Correlation:</strong> 0.648<br>
                     <strong>Status:</strong> Demo Mode (Backend offline)`;
                document.getElementById('valuation-result').style.display = 'block';
            }
        });

        // Tokenization
        document.getElementById('mint-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const tokenId = document.getElementById('tokenId').value;
            const amount = document.getElementById('amount').value;
            const royalty = document.getElementById('royalty').value;
            
            document.getElementById('mint-result').innerHTML = 
                `Token ${tokenId} minted: ${amount} units with ${royalty}% royalty<br>
                 <strong>Gas Optimization:</strong> 15.3% reduction achieved<br>
                 <strong>Status:</strong> Demo Mode - Connect wallet for live minting`;
            document.getElementById('mint-result').style.display = 'block';
        });

        // Governance
        document.getElementById('vote-form').addEventListener('submit', (e) => {
            e.preventDefault();
            const proposal = document.getElementById('proposal').value;
            const votes = parseInt(document.getElementById('votes').value);
            const cost = votes * votes;
            
            document.getElementById('vote-result').innerHTML = 
                `Voted ${votes} on "${proposal}"<br>
                 <strong>Cost:</strong> ${cost} tokens (quadratic formula)<br>
                 <strong>Inequality Reduction:</strong> 43.2% validated`;
            document.getElementById('vote-result').style.display = 'block';
        });
    </script>
</body>
</html>